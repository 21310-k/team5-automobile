H8S,H8/300 SERIES C/C++ COMPILER (V.6.02.01.000)   27-Nov-2024 16:28:29 PAGE   1

************ SOURCE LISTING ************

      Line Pi 0----+----1----+----2----+----3----+----4----+----5----+----6----+----7----+----8----+----9----+----0----+----1----+--
FILE NAME: C:\Users\s4exp\Desktop\soft2-20241127T060649Z-001\soft2\Soft2\itask_motor.c
         1     /*****************************************************************************************************************
         2     /*  FILE        : itask_motor.c                                                                                 */
         3     /*  DATE        :Tue, Jan 17, 2012                                                                              */
         4     /*  DESCRIPTION :AGVの走行管理割り込みタスク                                                                    */
         5     /*  CPU TYPE    :H8/3052F                                                                                       */
         6     /****************************************************************************************************************/
         7     #include    "machine.h"                                 /* 組込み関数の定義                                     */
         8     #include    "reg3052.h"                                 /* H8/3052Fの内蔵モジュール定義                         */
         9     #include    "agvdef.h"                                  /* 無人搬送車のデバイス定義                             */
        10     #include    "agvvars.h"                                 /* 無人搬送車の共通変数を定義                           */
        11     #include    "def_monitor_printf.h"
        12     #include    "Acc_Table.h"                               /* 加速テーブルの読み出し                               */
        13     
        14     /****************************************************************************************************************/
        15     /*  走行モータ制御タスク itask_motor                                                                            */
        16     /****************************************************************************************************************/
        17     #pragma interrupt itask_motor
        18     
        19     void itask_motor(void)
        20     {
        21         switch (MOTOR_STATE) {
        22             case MOTOR_STOP :
        23                 ACC_STATE = 0;
        24                 
        25                 break;
        26             
        27     
        28             case MOTOR_ACC :
        29                     bios_step_output();
        30                     GRA1 = ACC_TABLE[ACC_STATE];
        31                     ACC_STATE++;
        32                     if(ACC_STATE == 400) {
        33                         MOTOR_STATE = MOTOR_CONST;
        34                     }
        35     
        36                     if(AGV_STATE == AGV_STOP_WAIT || AGV_STATE == AGV_RUN_ALM) {
        37                         MOTOR_STATE = MOTOR_BREAK;
        38                 
        39                     }
        40                 
        41                 break;
        42     
        43             
        44     
        45             case MOTOR_CONST :
        46                 bios_step_output();
        47                 GRA1=19;
        48                 break;
        49     
        50             
        51     
        52             case MOTOR_BREAK :
        53                     bios_step_output();
        54                     GRA1 = ACC_TABLE[ACC_STATE];
        55                     ACC_STATE--;
        56                     if (ACC_STATE == 0) {
        57                         MOTOR_STATE = MOTOR_STOP;
        58                     }
        59                 break;
        60     
        61             
        62         }
        63         TSR1&=~0x01;
        64     
        65     }


H8S,H8/300 SERIES C/C++ COMPILER (V.6.02.01.000)   27-Nov-2024 16:28:29 PAGE   1

******* SECTION SIZE INFORMATION *******

PROGRAM  SECTION(P):                                0x000000AC Byte(s)
CONSTANT SECTION(C):                                0x00000322 Byte(s)
DATA     SECTION(D):                                0x00000002 Byte(s)
BSS      SECTION(B):                                0x00000000 Byte(s)

TOTAL PROGRAM  SECTION: 0x000000AC Byte(s)
TOTAL CONSTANT SECTION: 0x00000322 Byte(s)
TOTAL DATA     SECTION: 0x00000002 Byte(s)
TOTAL BSS      SECTION: 0x00000000 Byte(s)

    TOTAL PROGRAM SIZE: 0x000003D0 Byte(s)



** ASSEMBLER/LINKAGE EDITOR LIMITS INFORMATION **

NUMBER OF EXTERNAL REFERENCE  SYMBOLS:        5 
NUMBER OF EXTERNAL DEFINITION SYMBOLS:        3 
NUMBER OF INTERNAL/EXTERNAL SYMBOLS:         16 



**** COMPILE CONDITION INFORMATION ****

COMMAND LINE: -cpu=300HA:20 -object=C:\Users\s4exp\Desktop\soft2-20241127T060649Z-001\soft2\Soft2\Debug\itask_motor.obj -debug -list=C:\Users\s4exp\Desktop\soft2-20241127T060649Z-001\soft2\Soft2\Debug\itask_motor.lst -show=tab=4 -chgincpath C:\Users\s4exp\Desktop\soft2-20241127T060649Z-001\soft2\Soft2\itask_motor.c -lang=c -nologo
CPU         : 300ha:20
